# yaml-language-server: $schema=../../../schemas/dash-model.schema.json

model: User
table: users
timestamps: true

# Enable authentication - this model can be used for login
authenticatable:
  identifierField: email
  passwordField: password
  displayNameField: name

fields:
  id:
    type: int
    primaryKey: true
    autoIncrement: true

  name:
    type: string
    required: true
    min: 2
    max: 255

  email:
    type: string
    required: true
    unique: true
    format: email

  password:
    type: string
    required: true
    min: 8

  avatar:
    type: string
    nullable: true

  role:
    type: string
    required: true
    enum:
      - admin
      - user
      - guest
    default: user

  isActive:
    type: bool
    default: true

  # Roles relation - creates user_role pivot table
  roles:
    type: int
    hasMany: Role
    as: roles

  # Direct permissions relation - creates user_permission pivot table
  permissions:
    type: int
    hasMany: Permission
    as: permissions
